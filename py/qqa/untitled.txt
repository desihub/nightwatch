save


                if run_batch_qproc:
                    print('Spawning qproc of {} to batch process'.format(rawfile))
                    
#                     script='"print(\'Hello world!\'); from qqa.run import run_qproc; run_qproc(\'{rawfile}\', \'{outdir}\', cameras={cameras});"'.format(rawfile=rawfile, outdir=outdir, cameras=cameras)
                    
#                     print('script is ')
#                     print(script)
                    script = '"print(\'Hello world!\')"'
                    
                    batch_args = list(
                        ['srun', '-N', str(args.nodes), '-n', str(args.ntasks), '-C', str(args.constraint), '-q',
                         str(args.qos), '-t', str(args.time), 'python', '-c', script,
                        ])
                    #- TODO: delete debugging
                    print('calling subprocess')
#                     import IPython as ip
#                     ip.embed()
                    
                    err = subprocess.call(batch_args)      
                    print('ending subprocess')

                    if err == 0:
                        print('SUCCESS {}'.format('running qproc as batch process'))
                    if err != 0:
                        print('ERROR {} while running {}'.format(err, 'qproc as batch process'))
                        print('Failed to run qproc as batch process, switching to run locally')
                        run_batch_qproc = False

